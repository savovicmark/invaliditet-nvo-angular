<section>
  <mat-card>
    <mat-card-title>
      Usluga za: {{(korisnik$ | async)?.ime}} {{(korisnik$ | async)?.prezime}}
    </mat-card-title>
    <mat-card-subtitle *ngIf="(korisnik$ | async)?.datumRodjenja">
      Datum rodjenja: {{(korisnik$ | async)?.datumRodjenja | date: "dd/MM/yyyy"}}
    </mat-card-subtitle>
    <mat-card-content >
      <div class="korespondencija" *ngFor="let koresp of (usluga$ | async)?.korespondencije">
        <div fxLayout *ngIf="koresp.datumUpucivanjaZahtjeva">
          <p fxFlex="40%">Datum upucivanja zahtjeva:</p>
          <p fxFlex="40%">{{koresp.datumUpucivanjaZahtjeva | date: "dd/MM/yyyy"}}</p>
        </div>
        <div fxLayout *ngIf="koresp.koJePodnioZahtjev === 'korisnik'">
          <p fxFlex="40%">Zahtjev je podnio korisnik licno:</p>
          <p fxFlex="40%">{{(korisnik$ | async)?.ime}} {{(korisnik$ | async)?.prezime}}</p>
        </div>
        <div fxLayout *ngIf="koresp.koJePodnioZahtjev === 'drugo'">
          <p fxFlex="40%">Zahtjev je u ime korisnika podnio:</p>
          <p fxFlex="40%">{{koresp.imeKoJePodnioZahtjev}} {{koresp.prezimeKoJePodnioZahtjev}}</p>
        </div>
        <div fxLayout *ngIf="koresp.kojimPutemJePodnijetZahtjev[0]">
          <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
              <p>Zahtjev je podnijet putem:</p>
          </div>
          <div fxFlex="40%">
            <p *ngFor="let put of koresp.kojimPutemJePodnijetZahtjev">{{put}}</p>
          </div>
        </div>
        <div fxLayout *ngIf="koresp.pitanjeZaKojeJeTrazenaPomoc[0]">
            <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
                <p>Pitanje za koje je trazena pomoc:</p>
            </div>
            <div fxFlex="40%">
              <p *ngFor="let pitanje of koresp.pitanjeZaKojeJeTrazenaPomoc">{{pitanje}}</p>
            </div>
        </div>
        <div fxLayout *ngIf="koresp.sazetakPitanja">
          <p fxFlex="40%">Sazetak pitanja:</p>
          <p fxFlex="40%">{{koresp.sazetakPitanja }}</p>
        </div>
        <div fxLayout *ngIf="koresp.dostavljenaDokumenta[0]">
            <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
                <p>Dostavljena dokumenta:</p>
            </div>
            <div fxFlex="40%">
              <p *ngFor="let dok of koresp.dostavljenaDokumenta">{{dok.opis}} - {{dok.file}}</p>
            </div>
        </div>
        <div fxLayout *ngIf="koresp.datumOdgovora">
          <p fxFlex="40%">Datum pruzanja odgovora:</p>
          <p fxFlex="40%">{{koresp.datumOdgovora | date: "dd/MM/yyyy"}}</p>
        </div>
        <div fxLayout *ngIf="koresp.komeJeUpucenOdgovor === 'korisnik' || !koresp.komeJeUpucenOdgovor">
            <p fxFlex="40%">Odgovor je upucen korisniku licno:</p>
            <p fxFlex="40%">{{(korisnik$ | async)?.ime}} {{(korisnik$ | async)?.prezime}}</p>
        </div>
        <div fxLayout *ngIf="koresp.komeJeUpucenOdgovor === 'drugo'">
            <p fxFlex="40%">Odgovor je u ime korisnika upucen:</p>
            <p fxFlex="40%">{{koresp?.imeKomeJeUpucenOdgovor}} {{koresp?.prezimeKomeJeUpucenOdgovor}}</p>
        </div>
        <div fxLayout *ngIf="koresp.kojimPutemJePruzenOdgovor[0]">
            <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
                <p>Odgovor je pruzen putem:</p>
            </div>
            <div fxFlex="40%">
              <p *ngFor="let put of koresp.kojimPutemJePruzenOdgovor">{{put}}</p>
            </div>
        </div>
        <div fxLayout *ngIf="koresp.oblikPruzenePomoci[0]">
            <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
                <p>Oblik pruzene pomoci:</p>
            </div>
            <div fxFlex="40%">
              <p *ngFor="let obl of koresp.oblikPruzenePomoci">{{obl}}</p>
            </div>
        </div>
        <div fxLayout *ngIf="koresp.opisPruzenePomoci">
          <p fxFlex="40%">Kratki opis pruzene pomoci:</p>
          <p fxFlex="40%">{{koresp.opisPruzenePomoci}}</p>
        </div>
        <div fxLayout *ngIf="koresp.pripremljenaPravnaAkta[0]">
          <div fxLayout="column" fxLayoutAlign="center start" fxFlex="40%">
              <p>Pripremljena pravna akta:</p>
          </div>
          <div fxFlex="40%">
            <p *ngFor="let dok of koresp.pripremljenaPravnaAkta">{{dok.opis}} - {{dok.file}}</p>
          </div>
      </div>
      <div fxLayout *ngIf="koresp.datumOdgovoraIliNovogObracanja">
        <p fxFlex="40%">Datum odgovora/novog obracanja korisnika:</p>
        <p fxFlex="40%">{{koresp.datumOdgovoraIliNovogObracanja | date: "dd/MM/yyyy"}}</p>
      </div>
      <div fxLayout *ngIf="koresp.sazetakOdgovoraIliNovogObracanja">
        <p fxFlex="40%">Sazetak odgovora korisnika:</p>
        <p fxFlex="40%">{{koresp.sazetakOdgovoraIliNovogObracanja}}</p>
      </div>
      <div fxLayout *ngIf="koresp.rezultatPruzenePomoci">
        <p fxFlex="40%">Rezultat pruzene pomoci:</p>
        <p fxFlex="40%">{{koresp.rezultatPruzenePomoci}}</p>
      </div>
      <button mat-raised-button (click)="navigateToUpdateKoresp(koresp._id)">Izmijeni podatke o komunikaciji</button>
      </div>
      <button mat-raised-button>Dodaj novu komunikaciju</button>
    </mat-card-content>
  </mat-card>
</section>
